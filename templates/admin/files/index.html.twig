{% extends 'dashboard.html.twig' %}

{% block subtitle %}{{ 'Files'|trans }} Admin{% endblock %}

{% block content %}
    <h1>{{ 'Files'|trans }}</h1>

    <p><a class="btn btn-primary" href="{{ path('files_new') }}">{{ 'Upload a file'|trans }}</a></p>
    <div class="boxesRow">
        {% for file in files %}
            <div class="boxe">
                <h2 class="title">{{ file.name }}</h2>
                <div class="boxe-content">
                    <div class="boxe-image">
                        {% if 'application/pdf' in file.mime %}
                            {{ icon('pdf', 'card-img-top') }}
                        {% elseif 'application/zip' in file.mime %}
                            {{ icon('zip', 'card-img-top') }}
                        {% elseif 'image' in file.mime %}
                            <img src="{{ path('profile_files_view', { id : file.id, size: '150x150' }) }}" class="icon" alt="">
                        {% else %}
                            {{ icon('doc-dispo', 'card-img-top') }}
                        {% endif %}
                    </div>
                    <div class="boxe-infos">
                        <p class="categories">{{ file.categories | join(', ') }}</p>
                        <p class="size">{{ file.size | readableFilesize }}</p>
                        <p class="date"><small class="text-muted">{{ file.uploadDate|date('Y-m-d') }}</small></p>
                    </div>
                </div>
                <div class="actions">
                    <div class="action">
                        <p><a href="{{ path('profile_files_download', { id : file.id }) }}" target="_blank">{{ icon('download') }}</a></p>
                    </div>
                    <div class="action">
                        <p><a href="{{ path('profile_files_view', { id : file.id }) }}" target="_blank">{{ icon('see') }}</a></p>
                    </div>
                    <div class="action">
                        <p><a href="{{ path('files_edit', {'id': file.id}) }}">{{ icon('edit') }}</a></p>
                    </div>
                    <div class="action">{{ include('admin/files/_delete_form.html.twig') }}</div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
